<h1>Listing beers</h1>

<% if not flash[:error].nil? %>
    <b> <%= printRedColor(flash[:error]).html_safe %> </b>
<% end %>

<table class="table table-hover">
  <tr>
    <th> <%= link_to 'Name', beers_path(order:"name") %> </th>
    <th> <%= link_to 'Style', beers_path(order:"style") %> </th>
    <th> <%= link_to 'Brewery', beers_path(order:"brewery") %> </th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @beers.each do |beer| %>
      <tr>
        <td><%= link_to beer.name, beer %></td>
        <td>
          <% if beer.style.nil? %>
              <%= "No style" %>
          <% else %>
              <%= beer.style.name %>
          <% end %>
        </td>
        <td>
          <% if beer.brewery.nil? %> No brewery
          <% else %>
              <%= link_to Brewery.where(:id => beer.brewery_id).first.name, brewery_path(Brewery.where(:id => beer.brewery_id).first.id) %>
          <% end %>
        </td>
        <td><%= link_to 'Edit', edit_beer_path(beer), class:"btn btn-warning btn-sm active" %></td>
        <td><%= link_to 'Destroy', beer, method: :delete, data: {confirm: 'Are you sure?'}, class:"btn btn btn-danger btn-sm active" %></td>
      </tr>
  <% end %>
</table>

<br/>

<%= link_to('New Beer', new_beer_path, class: "btn btn-primary btn-sm active") if current_user %>
